{"version":3,"sources":["webpack:///webpack/bootstrap 869e3ca4943f10e847b5","webpack:///./nuxt.config.js","webpack:///../~/babel-runtime/regenerator/index.js","webpack:///external \"koa\"","webpack:///external \"nuxt\"","webpack:///external \"path\"","webpack:///external \"regenerator-runtime\"","webpack:///external \"vux-loader\"","webpack:///../lib/h5.js"],"names":["module","exports","rootDir","srcDir","router","base","head","meta","charset","name","content","css","plugins","src","ssr","build","extend","config","isDev","isClient","configs","vuxLoader","merge","options","path","join","__dirname","app","host","process","env","HOST","port","PORT","require","dev","nuxt","builder","use","ctx","next","status","Promise","resolve","reject","render","req","res","body","listen","console","log","start"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 869e3ca4943f10e847b5","import path from 'path'\n\nimport vuxLoader from 'vux-loader'\n\nmodule.exports = {\n  rootDir: '.',\n  srcDir: '.',\n  router: {\n    base: '/'\n  },\n  head: {\n    meta: [{\n        charset: 'utf-8'\n      },\n      {\n        name: 'viewport',\n        content: 'width=device-width, initial-scale=1, user-scalable=0'\n      }\n    ]\n  },\n  css: [\n    'vux/src/styles/reset.less',\n    'vux/src/styles/1px.less'\n  ],\n  plugins: [{\n      src: '~/plugins/vux-plugins',\n      ssr: false\n    },\n    {\n      src: '~/plugins/vux-components',\n      ssr: true\n    }\n  ],\n  build: {\n    extend(config, {\n      isDev,\n      isClient\n    }) {\n      const configs = vuxLoader.merge(config, {\n        options: {\n          ssr: true\n        },\n        plugins: ['vux-ui', {\n          name: 'less-theme',\n          path: path.join(__dirname, './styles/theme.less')\n        }]\n      })\n      return configs\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"vux-loader\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vux-loader\"\n// module id = 6\n// module chunks = 0","import Koa from 'koa'\nimport {\n  Nuxt,\n  Builder\n} from 'nuxt'\n\nasync function start() {\n  const app = new Koa()\n  const host = process.env.HOST || '127.0.0.1'\n  const port = process.env.PORT || 3001\n\n  // Import and Set Nuxt.js options\n  let config = require('../h5/nuxt.config.js')\n\n  config.dev = !(app.env === 'production')\n\n  // Instantiate nuxt.js\n  const nuxt = new Nuxt(config)\n\n  // Build in development\n  if (config.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  }\n\n  app.use(async (ctx, next) => {\n    // await next()\n\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n\n    return new Promise((resolve, reject) => {\n      // ctx.res.on('close', resolve)\n      //ctx.res.on('finish', resolve)\n      nuxt.render(ctx.req, ctx.res, promise => {\n        //console.log(promise);\n        // nuxt.render passes a rejected promise into callback on error.\n        //promise.then(resolve).catch(reject)\n      })\n    })\n  }, async (ctx, next) => {\n    ctx.body = 'hello';\n  }, )\n\n\n  app.listen(port, host)\n  console.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n}\n\nstart()\n\n\n\n// WEBPACK FOOTER //\n// ../lib/h5.js"],"sourceRoot":""}